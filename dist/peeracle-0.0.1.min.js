'use strict';(function(){function g(b){this.b=b;this.e=b.length;this.a=0}function l(){}function m(){this.J=this.v=null}function v(){this.length=this.offset=0}function r(){this.a={}}function n(){this.G=this.D=this.height=this.width=this.cues=this.duration=this.h=this.q=null}function h(b){this.Q=b;this.za=this.na=null;this.q="";this.G=this.D=this.height=this.width=this.duration=this.h=-1;this.cues=[];this.xa()}function u(){this.a=this.id=null;this.g="crc32";this.e=[];this.R=32768;this.duration=this.h=
-1;this.b=[]}function t(){this.a=this.b=null}function p(){this.a=this.b=null}function z(){}function w(){}function q(){this.t=this.S=null}function y(){this.type=y.u.U}function A(){}window.Peeracle={};var f=window.a;g.I="Index out of bounds";g.a="Value out of bounds";g.prototype.F=function(){if(this.a>=this.e)throw new RangeError(g.I);return this.b[this.a++]};g.prototype.da=function(b){try{this.b.set(new Uint8Array([b]),this.a++)}catch(c){throw c;}};g.prototype.L=function(b){var c;if(this.a>=this.a+
this.e)throw new RangeError(g.I);c=this.b.subarray(this.a,this.a+b);this.a+=b;return c};g.prototype.N=function(b){var c=b.length;try{this.b.set(b,this.a),this.a+=c}catch(d){throw d;}};g.prototype.ca=function(){var b=this.L(8),c=b[0]>>7&1,d=((b[0]&127)<<4|b[1]>>4&15)-1023,e,k,g=Math.pow(2,48);k=0+(b[1]&15)*g;for(e=2;8>e;++e)g=Math.pow(2,8*(8-e-1)),k+=(b[e]&255)*g;if(-1023<d){if(1024===d)return 0===k?0===c?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:NaN;k+=4503599627370496}else{if(0===k)return 0;
d=-1022}return Math.pow(-1,c)*k*Math.pow(2,-52)*Math.pow(2,d)};g.prototype.ea=function(b){var c=0,d=0,e;switch(b){case Number.POSITIVE_INFINITY:c=2146435072;break;case Number.NEGATIVE_INFINITY:c=4293918720;break;case 0:c=1073741824;break;case -0:c=3221225472;break;default:if(Number.isNaN(b)){c=2146959360;break}-0>=b&&(c=2147483648,e=-b);b=Math.floor(Math.log(e)/Math.log(2));e=Math.floor(e/Math.pow(2,b)*Math.pow(2,52));d=e&4294967295;e/=Math.pow(2,32);b+=1023;2047<=b?(b=2047,e=0):0>b&&(b=0);c=c|b<<
20|e&1048575}this.c(c);this.c(d)};g.prototype.r=function(b){var c=this.L(4),d=(c[0]<<24)+(c[1]<<16)+(c[2]<<8);return b?d+c[3]>>>0:d+c[3]};g.prototype.s=function(b,c){var d=0,e=[],k=b;for(c&&(k>>>=0);4>d;)e[d]=k&255,k>>=8,++d;this.N(new Uint8Array(e.reverse()))};g.prototype.d=function(){return this.r(!0)};g.prototype.c=function(b){this.s(b,!0)};g.prototype.M=function(b){var c="",d,e;if(b){d=this.L(b);for(e=0;e<b;++e)c+=String.fromCharCode(d[e]);return c}for(e=this.F();e;)c+=String.fromCharCode(e),
e=this.F();return c};g.prototype.O=function(b){var c,d,e;d=b.length;e=new Uint8Array(d+1);for(c=0;c<d;++c)e[c]=b.charCodeAt(c);e[d]=0;this.N(e)};g.prototype.seek=function(b){if(this.a>=this.e)throw new RangeError(g.I);this.a=b};f.Aa=g;l.k=function(b){for(var c in l)if(l.hasOwnProperty(c)&&l[c].hasOwnProperty("IDENTIFIER")&&l[c].T===b)return new l[c];return null};l.prototype.i=function(){};l.prototype.f=function(){};l.prototype.update=function(){};l.prototype.finish=function(){};l.prototype.n=function(){};
l.prototype.o=function(){};f.fa=l;m.prototype=Object.create(l.prototype);m.prototype.constructor=m;m.T="crc32";m.prototype.pa=function(){var b,c,d;this.J=[];for(c=0;256>c;c++){b=c;for(d=0;8>d;d++)b=b&1?3988292384^b>>>1:b>>>1;this.J[c]=b}};m.prototype.i=function(b){this.f();this.update(b);return this.finish()};m.prototype.f=function(){this.J||this.pa();this.v=-1};m.prototype.update=function(b){var c,d;d=Object.keys(b);c=0;for(d=d.length;c<d;++c)this.v=this.v>>>8^this.J[(this.v^b[c])&255]};m.prototype.finish=
function(){return(this.v^-1)>>>0};m.prototype.n=function(b,c){return c.c(b)};m.prototype.o=function(b){return b.d()};f.fa.a=m;v.prototype.ba=function(){};v.prototype.seek=function(){};v.prototype.Z=function(){};f.Ca=v;r.prototype.aa=function(b,c){this.a[b]=this.a[b]||[];this.a[b].push(c)};r.prototype.wa=function(b,c){function d(){e.$(b,d);c.apply(null,arguments)}var e=this;d.la=c;this.aa(b,d)};r.prototype.$=function(b,c){this.a[b]&&(c?this.a[b]=this.a[b].filter(function(b){return b!==c&&b.la!==c}):
delete this.a[b])};r.prototype.oa=function(b){var c;this.a[b]&&(c=[].slice.call(arguments,1),this.a[b].forEach(function(b){b.apply(null,c)}))};f.Da=r;f.Ea=function(){};n.k=function(b,c){var d,e=[];for(d in n)n.hasOwnProperty(d)&&n[d].hasOwnProperty("checkHeader")&&e.push(n[d]);e.length?e[0].X(b):c(null)};n.prototype.K=function(){};n.prototype.B=function(){};f.ja=n;h.p="Tag_";h.e="V_VP8";h.l="V_VP9";h.b="A_VORBIS";h.a="A_OPUS";h.ha="Invalid WebM file";h.ga="Nothing to read after the EBML tag";h.prototype=
Object.create(n.prototype);h.prototype.constructor=h;h.X=function(b){b.seek(0)};h.prototype.xa=function(){this.Q.seek(0)};h.prototype.K=function(){this.ya(this.na)};h.prototype.B=function(b,c){var d,e,k=null;d=0;for(e=this.cues.length;d<e;++d)if(this.cues[d].H===b){k=this.cues[d];break}k||c(null);this.Q.seek(this.za.qa+k.Y)};h.prototype.ya=function(b){this.Q.seek(b.qa)};f.ja.a=h;u.prototype.C=function(){if(this.id)return this.id;this.a||(this.a=l.k(this.g));this.a.f();return this.id=this.a.finish()};
u.prototype.l=function(b){var c,d,e=b.cues,k=0,g=0;b=0;for(c=e.length;b<c;++b)d=e[b],k+=d.Y-g,g=d.Y;c=k/c;for(b=this.R;262144>b&&c>b;b*=2);return b};u.prototype.A=function(b,c,d){var e,k=c.cues.length,g=0,x=c.cues[g].H;c.B(x,function B(f){var h,m,n,p;if(f){h=f.length;m=b.P;this.a||(this.a=l.k(this.g));n={H:x,length:h,i:this.a.i(f),j:[]};for(e=0;e<h;e+=m)p=f.subarray(e,e+m),n.j.push(this.a.i(p)),h-e<m&&(m=h-e);b.m.push(n);++g>=k?(this.b.push(b),d()):(x=c.cues[g].H,c.B(x,B.bind(this)))}else this.b.push(b),
d()}.bind(this))};u.prototype.w=function(b,c,d){c={type:1,q:b.q,W:0,width:b.width,height:b.height,D:b.D,G:b.G,P:this.l(b),f:c,m:[]};-1===this.h&&(this.h=b.h);-1===this.duration&&(this.duration=b.duration);b.cues.length?this.A(c,b,d):(this.b.push(c),d())};u.prototype.p=function(b,c){b.K(function(d){this.w(b,d,c)}.bind(this))};f.Metadata=u;t.prototype.p=function(b){var c,d;this.a.c(b.H);this.a.c(b.length);this.b.n(b.i,this.a);this.a.c(b.j.length);c=0;for(d=b.j.length;c<d;++c)this.b.n(b.j[c],this.a)};
t.prototype.w=function(b){var c,d;this.a.da(b.type);this.a.O(b.q);this.a.c(b.W);this.a.s(b.width);this.a.s(b.height);this.a.s(b.D);this.a.s(b.G);this.a.c(b.P);this.a.c(b.f.length);this.a.N(b.f);this.a.c(b.m.length);c=0;for(d=b.m.length;c<d;++c)this.p(b.m[c])};t.prototype.A=function(b){var c,d=b.b.length;this.a.c(d);for(c=0;c<d;++c)this.w(b.b[c])};t.prototype.C=function(b){var c=b.e;this.a.c(c.length);for(b=0;b<c.length;++b)this.a.O(c[b])};t.prototype.l=function(b){this.b=l.k(b.g);if(!this.b)throw"Unknown checksum "+
b.g;this.a.c(1347568460);this.a.c(2);this.a.O(b.g);this.a.c(b.h);this.a.ea(b.duration)};t.prototype.e=function(b){var c,d,e,g,h,f=8+(b.g.length+1)+4+8;d=b.e;f+=4;for(c=0;c<d.length;++c)f+=d[c].length+1;b=b.b;f+=4;for(c=0;c<b.length;++c)for(d=b[c],f+=1+(d.q.length+1)+4+4+4+4+4+4+4+d.f.length,h=d.m,f+=4,d=0;d<h.length;++d)for(f+=12,g=h[d].j,f+=4,e=0;e<g.length;++e)f+=4;return new Uint8Array(f)};t.prototype.n=function(b){this.a=new g(this.e(b));this.l(b);this.C(b);this.A(b);return this.a.b};f.Ga=t;p.prototype.l=
function(){var b={},c,d,e;b.H=this.a.d();b.length=this.a.d();b.i=this.b.o(this.a);b.j=[];c=this.a.d();for(d=0;d<c;++d)e=this.b.o(this.a),b.j.push(e);return b};p.prototype.p=function(b){var c,d=this.a.d();b.f=new Uint8Array(d);for(c=0;c<d;++c)b.f[c]=this.a.F()};p.prototype.w=function(b){var c,d,e=this.a.d();b.m=[];for(c=0;c<e;++c)d=this.l(),b.m.push(d)};p.prototype.A=function(){var b={};b.type=this.a.F();b.q=this.a.M();b.W=this.a.d();b.width=this.a.r();b.height=this.a.r();b.D=this.a.r();b.G=this.a.r();
b.P=this.a.d();this.p(b);this.w(b);return b};p.prototype.C=function(){var b,c,d=[],e=this.a.d();for(b=0;b<e;++b)c=this.A(),d.push(c);return d};p.prototype.R=function(){var b,c=this.a.d(),d=[];for(b=0;b<c;++b)d.push(this.a.M());return d};p.prototype.e=function(){var b={};b.ra=this.a.d();if(1347568460!==b.ra)throw Error("Wrong file header");b.version=this.a.d();b.g=this.a.M();this.b=l.k(b.g);if(!this.b)throw Error("Unknown checksum "+b.g);b.h=this.a.d();b.duration=this.a.ca();return b};p.prototype.o=
function(b,c){var d,e,f;this.a=b;d=this.e();e=this.R();f=this.C();c.h=d.h;c.duration=d.duration;c.e=e;c.b=f};f.Ha=p;z.prototype=Object.create(r.prototype);f.Ia=z;w.prototype=Object.create(r.prototype);w.prototype.constructor=w;f.Ja=w;f.V={};q.prototype=Object.create(r.prototype);q.prototype.constructor=q;q.prototype.va=function(){console.log("[Peeracle.Tracker.Client] onOpen");this.t.send(new Uint8Array([0,0]))};q.prototype.ua=function(b){console.log("[Peeracle.Tracker.Client] onMessage",b.data)};
q.prototype.ta=function(){console.log("[Peeracle.Tracker.Client] onError")};q.prototype.sa=function(b){console.log("[Peeracle.Tracker.Client] onClose",b.code,b.reason)};q.prototype.ma=function(b){this.S=b;this.t=new WebSocket(this.S,"prcl-0.0.1",this.S);this.t.onopen=this.va.bind(this);this.t.onmessage=this.ua.bind(this);this.t.onerror=this.ta.bind(this);this.t.onclose=this.sa.bind(this)};f.V.Ba=q;y.u={U:0,ia:1,ka:2};f.V.Fa=y;Math.trunc=Math.trunc||function(b){return 0>b?Math.ceil(b):Math.floor(b)};
A.trunc=function(b){return Math.trunc(b)};f.Ka=A})();window.a=Peeracle;Peeracle.BinaryStream=BinaryStream;BinaryStream.ERR_INDEX_OUT_OF_BOUNDS=BinaryStream.I;BinaryStream.prototype.readByte=BinaryStream.prototype.F;BinaryStream.prototype.writeByte=BinaryStream.prototype.da;BinaryStream.prototype.readBytes=BinaryStream.prototype.L;BinaryStream.prototype.writeBytes=BinaryStream.prototype.N;BinaryStream.prototype.readFloat8=BinaryStream.prototype.ca;BinaryStream.prototype.writeFloat8=BinaryStream.prototype.ea;BinaryStream.prototype.readInt32=BinaryStream.prototype.r;
BinaryStream.prototype.writeInt32=BinaryStream.prototype.s;BinaryStream.prototype.readUInt32=BinaryStream.prototype.d;BinaryStream.prototype.writeUInt32=BinaryStream.prototype.c;BinaryStream.prototype.readString=BinaryStream.prototype.M;BinaryStream.prototype.writeString=BinaryStream.prototype.O;BinaryStream.prototype.seek=BinaryStream.prototype.seek;Peeracle.Crypto=Crypto;Crypto.createInstance=Crypto.k;Crypto.prototype.checksum=Crypto.prototype.i;Crypto.prototype.init=Crypto.prototype.f;
Crypto.prototype.update=Crypto.prototype.update;Crypto.prototype.finish=Crypto.prototype.finish;Crypto.prototype.serialize=Crypto.prototype.n;Crypto.prototype.unserialize=Crypto.prototype.o;Peeracle.Crypto.Crc32=Crc32;Crc32.IDENTIFIER=Crc32.T;Crc32.prototype.checksum=Crc32.prototype.i;Crc32.prototype.init=Crc32.prototype.f;Crc32.prototype.update=Crc32.prototype.update;Crc32.prototype.finish=Crc32.prototype.finish;Crc32.prototype.serialize=Crc32.prototype.n;Crc32.prototype.unserialize=Crc32.prototype.o;
Peeracle.DataSource=DataSource;Peeracle.DataSource.File=File;File.prototype.read=File.prototype.ba;File.prototype.seek=File.prototype.seek;File.prototype.fetchBytes=File.prototype.Z;Peeracle.DataSource.Http=Http;Http.prototype.read=Http.prototype.ba;Http.prototype.seek=Http.prototype.seek;Http.prototype.fetchBytes=Http.prototype.Z;Peeracle.Listenable=Listenable;Listenable.prototype.on=Listenable.prototype.aa;Listenable.prototype.once=Listenable.prototype.wa;Listenable.prototype.off=Listenable.prototype.$;
Listenable.prototype.emit=Listenable.prototype.oa;Peeracle.Media=Media;Media.createInstance=Media.k;Media.prototype.getInitSegment=Media.prototype.K;Media.prototype.getMediaSegment=Media.prototype.B;Peeracle.Media.WebM=WebM;WebM.ERR_INVALID_WEBM=WebM.ha;WebM.ERR_EMPTY_WEBM=WebM.ga;WebM.checkHeader=WebM.X;WebM.prototype.getInitSegment=WebM.prototype.K;WebM.prototype.getMediaSegment=WebM.prototype.B;Peeracle.Metadata=Metadata;Metadata.prototype.getId=Metadata.prototype.C;
Metadata.prototype.calculateChunkSize=Metadata.prototype.l;Metadata.prototype.addStream=Metadata.prototype.p;Peeracle.MetadataSerializer=MetadataSerializer;MetadataSerializer.prototype.serialize=MetadataSerializer.prototype.n;Peeracle.MetadataUnserializer=MetadataUnserializer;MetadataUnserializer.prototype.unserialize=MetadataUnserializer.prototype.o;Peeracle.PeerConnection=PeerConnection;Peeracle.Tracker=Tracker;Peeracle.Tracker.Client=Client;Client.prototype.connect=Client.prototype.ma;
Peeracle.Tracker.Message=Message;Peeracle.Tracker.Message.Type=Message.u;Peeracle.Tracker.Message.Type.None=Message.u.U;Peeracle.Tracker.Message.Type.Hello=Message.u.ia;Peeracle.Tracker.Message.Type.Welcome=Message.u.ka;Peeracle.Utils=Utils;Utils.trunc=Utils.trunc;window.Peeracle=Peeracle;
